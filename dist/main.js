!function(){"use strict";var t,e;!function(t){t.on=function(t,e,s,i,n){let o=!1;if("string"==typeof t){const a=(null!=n?n:document).querySelectorAll(t);for(const t of a)t.addEventListener(e,s,null!=i&&i);return{dispose:()=>{if(!o){o=!0;for(const t of a)t.removeEventListener(e,s,null!=i&&i)}}}}return t.addEventListener(e,s,null!=i&&i),{dispose:()=>{o||(o=!0,t.removeEventListener(e,s,null!=i&&i))}}},t.$=function(t){return document.querySelectorAll(t)}}(t||(t={})),function(t){t.clear=function(){localStorage.clear()},t.get=function(t){const e=localStorage.getItem(t);if(null!=e)return JSON.parse(e)},t.remove=function(t){localStorage.removeItem(t)},t.set=function(t,e){localStorage.setItem(t,JSON.stringify(e))}}(e||(e={}));class s{constructor(e){this.name=e,t.on(`[data-action="${this.name}"]`,"click",this.onButtonClicked.bind(this));const s=t.$(`.section[data-view="${this.name}"]`)[0];this.classes=["is-section","is-section--"+this.name];const i=s.dataset.classes;null!=i&&this.classes.push(...i.split(" "))}get hash(){return"#"+this.name}activate(t,e=!1){document.body.classList.add(...this.classes)}deactivate(){document.body.classList.remove(...this.classes)}getHash(t){return`${this.hash}${t?""+(t.startsWith("/")?t:"/"+t):""}`.toLowerCase()}matchesPath(t){var e;return(null===(e=document.location.hash)||void 0===e?void 0:e.toLowerCase())===this.getHash(t)}setPath(t){document.location.hash=this.getHash(t)}onButtonClicked(t){var e;(null===(e=document.location.hash)||void 0===e?void 0:e.startsWith(this.hash))?document.location.hash="":this.setPath()}}new class{constructor(){this.activeView="",this._sectionCompleteHandle=0,this.views=[];for(const e of t.$(".section[data-view]")){const t=e.dataset.view;null!=t&&this.views.push(new s(t))}t.on('[data-action="back"]',"click",this.onBackButtonClicked.bind(this)),t.on(".changelog__image","click",(function(){this.classList.toggle("expand",!this.classList.contains("expand"))})),window.addEventListener("hashchange",this.onHashChanged.bind(this),!1);const[e,i]=this.getHashAndPaths();this.switchView(e,i,!0)}switchView(t,e,s=!1){window.clearTimeout(this._sectionCompleteHandle),this._sectionCompleteHandle=0;const i=this.activeView;switch(t){case"":if(this.activeView="",i!==this.activeView){const t=this.views.find((t=>t.name===i));null!=t&&t.deactivate()}document.body.classList.toggle("complete",s),s||(document.location.hash="");break;default:{const n=this.views.find((e=>e.name===t));if(null==n)return void this.switchView("",[],!1);if(this.activeView=t,i!==this.activeView){const t=this.views.find((t=>t.name===i));null!=t&&t.deactivate()}n.activate(e,s),document.body.classList.toggle("complete",s),s||(this._sectionCompleteHandle=window.setTimeout((()=>document.body.classList.add("complete")),1e3));break}}s&&setTimeout((()=>document.body.classList.remove("preload")),1)}onBackButtonClicked(t){document.location.hash=""}onHashChanged(t){const[e,s]=this.getHashAndPaths();this.redirect(e,s)||this.switchView(e,s)}getHashAndPaths(){var t;let e=null===(t=document.location.hash)||void 0===t?void 0:t.substring(1),s=[];return e&&([e,...s]=e.split("/")),[e,s]}redirect(t,e){return"support-gitlens"===t&&(document.location.hash="#sponsor",!0)}}}();
//# sourceMappingURL=main.js.map