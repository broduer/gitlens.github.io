!function(){"use strict";var t,s;!function(t){t.on=function(t,s,i,e,n){let o=!1;if("string"==typeof t){const a=(null!=n?n:document).querySelectorAll(t);for(const t of a)t.addEventListener(s,i,null!=e&&e);return{dispose:()=>{if(!o){o=!0;for(const t of a)t.removeEventListener(s,i,null!=e&&e)}}}}return t.addEventListener(s,i,null!=e&&e),{dispose:()=>{o||(o=!0,t.removeEventListener(s,i,null!=e&&e))}}},t.$=function(t){return document.querySelectorAll(t)}}(t||(t={})),function(t){t.clear=function(){localStorage.clear()},t.get=function(t){const s=localStorage.getItem(t);if(null!=s)return JSON.parse(s)},t.remove=function(t){localStorage.removeItem(t)},t.set=function(t,s){localStorage.setItem(t,JSON.stringify(s))}}(s||(s={}));class i{constructor(s){this.name=s;const i=this;t.on(`[data-action="${this.name}"]`,"click",this.onButtonClicked.bind(this)),t.on('[data-action="scrollTo"]',"click",(function(t){i.onScrollToClicked(this,t)}));const e=t.$(`.section[data-view="${this.name}"]`)[0];this.classes=["is-section",`is-section--${this.name}`];const n=e.dataset.classes;null!=n&&this.classes.push(...n.split(" "))}get hash(){return`#${this.name}`}activate(t,s=!1){document.body.classList.add(...this.classes)}deactivate(){document.body.classList.remove(...this.classes)}getHash(t){return`${this.hash}${t?`${t.startsWith("/")?t:`/${t}`}`:""}`.toLowerCase()}matchesPath(t){var s;return(null===(s=document.location.hash)||void 0===s?void 0:s.toLowerCase())===this.getHash(t)}setPath(t){document.location.hash=this.getHash(t)}onButtonClicked(t){var s;(null===(s=document.location.hash)||void 0===s?void 0:s.startsWith(this.hash))?document.location.hash="":this.setPath()}onScrollToClicked(t,s){const i=t.dataset.scrollTo;document.getElementById(i).scrollIntoView({behavior:"smooth"})}}function e(t,s){return t+Math.random()*(s-t)}class n{constructor(){this.alpha=0,this.radius=0,this.x=0,this.y=0,this._vx=0,this._vy=0,this.reset()}reset(){this.alpha=e(.1,.9),this.radius=e(1,4),this.x=e(0,window.innerWidth),this.y=e(0,-window.innerHeight),this._vx=e(-3,3),this._vy=e(2,5)}update(){this.x+=this._vx,this.y+=this._vy,this.y+this.radius>window.innerHeight&&this.reset()}}class o{constructor(t=!0){var s,i,e;if(this.snowing=t,this._height=0,this._width=0,this._snowflakes=[],this._clearBound=this.clear.bind(this),this._updateBound=this.update.bind(this),this._canvas=null!==(s=document.querySelector("canvas.snow"))&&void 0!==s?s:void 0,this._ctx=null!==(e=null===(i=this._canvas)||void 0===i?void 0:i.getContext("2d"))&&void 0!==e?e:void 0,null==this._ctx)return;const n=document.querySelector(".snow__trigger");null!=n&&n.addEventListener("click",(()=>this.onToggle(!this.snowing))),window.addEventListener("resize",(()=>this.onResize())),this.onResize(),this.onToggle(t)}onToggle(t){this.snowing=t,document.body.classList.toggle("snowing",this.snowing),this.snowing&&(this.createSnowflakes(),requestAnimationFrame(this._updateBound))}onResize(){null!=this._canvas&&(this._height=window.innerHeight,this._width=window.innerWidth,this._canvas.width=this._width,this._canvas.height=this._height)}clear(){null!=this._canvas&&null!=this._ctx&&(this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._snowflakes.length=0)}createSnowflakes(){const t=window.innerWidth/4;for(let s=0;s<t;s++)this._snowflakes.push(new n)}update(){if(null==this._ctx)return;this._ctx.clearRect(0,0,this._width,this._height);const t=document.body.classList.contains("vscode-light")?"#424242":"#fff";for(const s of this._snowflakes)s.update(),this._ctx.save(),this._ctx.fillStyle=t,this._ctx.beginPath(),this._ctx.arc(s.x,s.y,s.radius,0,2*Math.PI),this._ctx.closePath(),this._ctx.globalAlpha=s.alpha,this._ctx.fill(),this._ctx.restore();requestAnimationFrame(this.snowing?this._updateBound:this._clearBound)}}new class{constructor(){this.activeView="",this._sectionCompleteHandle=0,this.views=[];for(const s of t.$(".section[data-view]")){const t=s.dataset.view;null!=t&&this.views.push(new i(t))}t.on('[data-action="back"]',"click",this.onBackButtonClicked.bind(this)),t.on(".changelog__image","click",(function(){this.classList.toggle("expand",!this.classList.contains("expand"))})),window.addEventListener("hashchange",this.onHashChanged.bind(this),!1);const[s,e]=this.getHashAndPaths();this.switchView(s,e,!0)}switchView(t,s,i=!1){window.clearTimeout(this._sectionCompleteHandle),this._sectionCompleteHandle=0;const e=this.activeView;switch(t){case"":if(this.activeView="",e!==this.activeView){const t=this.views.find((t=>t.name===e));null!=t&&t.deactivate()}document.body.classList.toggle("complete",i),i||(document.location.hash="");break;default:{const n=this.views.find((s=>s.name===t));if(null==n)return void this.switchView("",[],!1);if(this.activeView=t,e!==this.activeView){const t=this.views.find((t=>t.name===e));null!=t&&t.deactivate()}n.activate(s,i),document.body.classList.toggle("complete",i),i||(this._sectionCompleteHandle=window.setTimeout((()=>document.body.classList.add("complete")),1e3));break}}i&&setTimeout((()=>document.body.classList.remove("preload")),1)}onBackButtonClicked(t){document.location.hash=""}onHashChanged(t){const[s,i]=this.getHashAndPaths();this.redirect(s,i)||this.switchView(s,i)}getHashAndPaths(){var t;let s=null===(t=document.location.hash)||void 0===t?void 0:t.substring(1),i=[];return s&&([s,...i]=s.split("/")),[s,i]}redirect(t,s){return"support-gitlens"===t&&(document.location.hash="#sponsor",!0)}},requestAnimationFrame((()=>new o))}();
//# sourceMappingURL=main.js.map